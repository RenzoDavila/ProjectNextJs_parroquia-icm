module.exports=[99026,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(70106);let e=(0,d.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var f=a.i(33508),g=a.i(87532),h=a.i(69012),i=a.i(41675),j=a.i(46842),k=a.i(63519),l=a.i(92258);let m=(0,d.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),n=(0,d.default)("file-check",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),o={pending:"Pendiente",confirmed:"Confirmada",cancelled:"Cancelada",completed:"Completada"},p={pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800"},q={accion_gracias:"Acción de Gracias",difuntos:"Por los Difuntos",salud:"Por Salud",especial:"Intención Especial"};function r(){let[a,d]=(0,c.useState)([]),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)("all"),[z,A]=(0,c.useState)(!1);(0,c.useEffect)(()=>{B()},[]);let B=async()=>{try{let a=await fetch("/api/admin/reservations"),b=await a.json();b.success&&d(b.data||[])}catch(a){console.error("Error al cargar reservaciones:",a)}finally{s(!1)}},C=async(b,c)=>{A(!0);try{(await fetch(`/api/admin/reservations/${b}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:c})})).ok&&(d(a.map(a=>a.id===b?{...a,status:c}:a)),t?.id===b&&u({...t,status:c}))}catch(a){console.error("Error:",a)}finally{A(!1)}},D=async b=>{A(!0);try{(await fetch(`/api/admin/reservations/${b}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({pago_verificado:!0})})).ok&&(d(a.map(a=>a.id===b?{...a,pago_verificado:!0}:a)),t?.id===b&&u({...t,pago_verificado:!0}))}catch(a){console.error("Error:",a)}finally{A(!1)}},E=a.filter(a=>{let b=""===v||`${a.nombre} ${a.apellidos}`.toLowerCase().includes(v.toLowerCase())||a.email.toLowerCase().includes(v.toLowerCase())||a.dni.includes(v)||a.confirmation_code?.toLowerCase().includes(v.toLowerCase()),c="all"===x||a.status===x;return b&&c}),F=a=>new Date(a).toLocaleDateString("es-PE",{year:"numeric",month:"short",day:"numeric"}),G=a=>new Intl.NumberFormat("es-PE",{style:"currency",currency:"PEN"}).format(a);return r?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando reservaciones..."})]})}):(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,b.jsx)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Reservas de Misas"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Gestiona las solicitudes de misas"})]})}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(g.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,b.jsx)("input",{type:"text",placeholder:"Buscar por nombre, email, DNI o código...",value:v,onChange:a=>w(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Filter,{className:"text-gray-400 w-5 h-5"}),(0,b.jsxs)("select",{value:x,onChange:a=>y(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"all",children:"Todos los estados"}),Object.entries(o).map(([a,c])=>(0,b.jsx)("option",{value:a,children:c},a))]})]})]})]}),E.length>0?(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Código"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Solicitante"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha Misa"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monto"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),(0,b.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:E.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("span",{className:"font-mono text-sm text-gray-900",children:a.confirmation_code||`#${a.id}`})}),(0,b.jsxs)("td",{className:"px-6 py-4",children:[(0,b.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[a.nombre," ",a.apellidos]}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.email})]}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("span",{className:"text-sm text-gray-900",children:q[a.tipo_misa]||a.tipo_misa})}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,b.jsx)("div",{className:"text-sm text-gray-900",children:F(a.reservation_date)}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.reservation_time})]}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:G(a.precio)}),(0,b.jsx)("div",{className:"flex items-center gap-1",children:a.pago_verificado?(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-green-600",children:[(0,b.jsx)(n,{className:"w-3 h-3"})," Verificado"]}):(0,b.jsx)("span",{className:"text-xs text-yellow-600",children:"Pendiente verificar"})})]}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p[a.status]}`,children:o[a.status]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,b.jsx)("button",{onClick:()=>u(a),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ver detalles",children:(0,b.jsx)(e,{className:"w-5 h-5"})})})]},a.id))})]})})}):(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[(0,b.jsx)(i.Calendar,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No hay reservaciones"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Las reservaciones aparecerán aquí cuando se registren"})]}),t&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-md flex items-center justify-center z-50 p-4",onClick:()=>u(null),children:(0,b.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:["Reservación #",t.confirmation_code||t.id]}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["Registrada el ",F(t.created_at)]})]}),(0,b.jsx)("button",{onClick:()=>u(null),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,b.jsx)(f.X,{className:"w-6 h-6"})})]})}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-500",children:"Estado"}),(0,b.jsx)("select",{value:t.status,onChange:a=>C(t.id,a.target.value),disabled:z,className:`mt-1 px-3 py-1 rounded-lg border ${p[t.status]} font-medium text-sm`,children:Object.entries(o).map(([a,c])=>(0,b.jsx)("option",{value:a,children:c},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-500",children:"Pago"}),(0,b.jsx)("div",{className:"mt-1",children:t.pago_verificado?(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-800 rounded-lg text-sm font-medium",children:[(0,b.jsx)(n,{className:"w-4 h-4"})," Verificado"]}):(0,b.jsx)("button",{onClick:()=>D(t.id),disabled:z,className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-lg text-sm font-medium hover:bg-yellow-200 transition-colors",children:"Verificar Pago"})})]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,b.jsxs)("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[(0,b.jsx)(j.User,{className:"w-5 h-5"})," Datos del Solicitante"]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Nombre:"})," ",(0,b.jsxs)("span",{className:"font-medium",children:[t.nombre," ",t.apellidos]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"DNI:"})," ",(0,b.jsx)("span",{className:"font-medium",children:t.dni})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(l.Mail,{className:"w-4 h-4 text-gray-400"})," ",(0,b.jsx)("span",{className:"font-medium",children:t.email})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(k.Phone,{className:"w-4 h-4 text-gray-400"})," ",(0,b.jsx)("span",{className:"font-medium",children:t.telefono})]})]})]}),(0,b.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,b.jsxs)("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[(0,b.jsx)(i.Calendar,{className:"w-5 h-5"})," Datos de la Misa"]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Fecha:"})," ",(0,b.jsx)("span",{className:"font-medium",children:F(t.reservation_date)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Hora:"})," ",(0,b.jsx)("span",{className:"font-medium",children:t.reservation_time})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Lugar:"})," ",(0,b.jsx)("span",{className:"font-medium",children:t.location})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Tipo:"})," ",(0,b.jsx)("span",{className:"font-medium",children:q[t.tipo_misa]||t.tipo_misa})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Intención"}),(0,b.jsx)("p",{className:"text-gray-700 bg-gray-50 rounded-lg p-3",children:t.intencion})]}),t.difuntos&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Difuntos"}),(0,b.jsx)("p",{className:"text-gray-700 bg-gray-50 rounded-lg p-3",children:t.difuntos})]}),t.observaciones&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Observaciones"}),(0,b.jsx)("p",{className:"text-gray-700 bg-gray-50 rounded-lg p-3",children:t.observaciones})]}),(0,b.jsxs)("div",{className:"bg-amber-50 rounded-lg p-4",children:[(0,b.jsxs)("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[(0,b.jsx)(m,{className:"w-5 h-5"})," Información de Pago"]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Monto:"})," ",(0,b.jsx)("span",{className:"font-bold text-lg",children:G(t.precio)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Método:"})," ",(0,b.jsx)("span",{className:"font-medium capitalize",children:t.metodo_pago})]})]}),t.comprobante_url&&(0,b.jsx)("div",{className:"mt-3",children:(0,b.jsx)("a",{href:t.comprobante_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"Ver comprobante de pago →"})})]})]}),(0,b.jsx)("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex justify-end gap-3",children:(0,b.jsx)("button",{onClick:()=>u(null),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cerrar"})})]})})]})}a.s(["default",()=>r],99026)}];

//# sourceMappingURL=src_app_admin_reservations_page_tsx_e1cca514._.js.map