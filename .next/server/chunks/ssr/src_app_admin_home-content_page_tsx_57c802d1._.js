module.exports=[17303,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(15618),e=a.i(24569),f=a.i(81560),g=a.i(33508),h=a.i(14548),i=a.i(38632);let j=(0,a.i(70106).default)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);var k=a.i(4720),l=a.i(41710),m=a.i(41675),n=a.i(76472),o=a.i(60246),p=a.i(54115),q=a.i(21374),r=a.i(97063),s=a.i(73320);let t=[{value:"clock",label:"Reloj",icon:l.Clock},{value:"calendar",label:"Calendario",icon:m.Calendar},{value:"heart",label:"Corazón",icon:n.Heart},{value:"users",label:"Usuarios",icon:o.Users},{value:"book",label:"Libro",icon:p.Book},{value:"star",label:"Estrella",icon:q.Star},{value:"info",label:"Info",icon:r.Info}],u={title:"",description:"",icon:"info",link_url:"",display_order:1,is_active:!0},v={title:"",description:"",image_url:"",link_url:"",display_order:1,is_active:!0};function w(){let[a,l]=(0,c.useState)("services"),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(!0),[q,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(u),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)(!0),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(v),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(!1),P=(0,c.useRef)(null);(0,c.useEffect)(()=>{Q(),T()},[]);let Q=async()=>{try{let a=await fetch("/api/admin/home-services"),b=await a.json();b.success&&n(b.data||[])}catch(a){console.error("Error:",a)}finally{p(!1)}},R=async a=>{a.preventDefault(),M(!0);try{let a=x?`/api/admin/home-services/${x.id}`:"/api/admin/home-services",b=await fetch(a,{method:x?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)});if(b.ok)Q(),w(!1);else{let a=await b.json();alert(a.message||"Error al guardar")}}catch(a){console.error("Error:",a),alert("Error al guardar")}finally{M(!1)}},S=async a=>{if(confirm("¿Eliminar este servicio?"))try{(await fetch(`/api/admin/home-services/${a}`,{method:"DELETE"})).ok&&Q()}catch(a){console.error("Error:",a)}},T=async()=>{try{let a=await fetch("/api/admin/interest-pages"),b=await a.json();b.success&&C(b.data||[])}catch(a){console.error("Error:",a)}finally{E(!1)}},U=async a=>{let b=a.target.files?.[0];if(b){O(!0);try{let a=new FormData;a.append("file",b),a.append("folder","interest-pages");let c=await fetch("/api/upload",{method:"POST",body:a}),d=await c.json();d.success?(K(a=>({...a,image_url:d.url})),P.current&&(P.current.value="")):alert(d.error||"Error al subir la imagen")}catch(a){console.error("Error al subir imagen:",a),alert("Error al subir la imagen")}finally{O(!1),P.current&&(P.current.value="")}}},V=async a=>{a.preventDefault(),M(!0);try{let a=H?`/api/admin/interest-pages/${H.id}`:"/api/admin/interest-pages",b=await fetch(a,{method:H?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)});if(b.ok)T(),G(!1);else{let a=await b.json();alert(a.message||"Error al guardar")}}catch(a){console.error("Error:",a),alert("Error al guardar")}finally{M(!1)}},W=async a=>{if(confirm("¿Eliminar esta página de interés?"))try{(await fetch(`/api/admin/interest-pages/${a}`,{method:"DELETE"})).ok&&T()}catch(a){console.error("Error:",a)}};return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Contenido del Home"}),(0,b.jsx)("p",{className:"text-gray-500 mt-1",children:"Gestiona los servicios y páginas de interés"})]})}),(0,b.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,b.jsxs)("button",{onClick:()=>l("services"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${"services"===a?"bg-emerald-100 text-emerald-700":"text-gray-600 hover:bg-gray-100"}`,children:[(0,b.jsx)(j,{className:"w-4 h-4"}),"Servicios (",m.length,")"]}),(0,b.jsxs)("button",{onClick:()=>l("interest"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${"interest"===a?"bg-emerald-100 text-emerald-700":"text-gray-600 hover:bg-gray-100"}`,children:[(0,b.jsx)(k.FileText,{className:"w-4 h-4"}),"Páginas de Interés (",B.length,")"]})]})]}),"services"===a&&(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-4 border-b flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"font-semibold text-gray-900",children:"Servicios del Home"}),(0,b.jsxs)("button",{onClick:()=>{y(null),A({...u,display_order:m.length+1}),w(!0)},className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:[(0,b.jsx)(d.Plus,{className:"w-4 h-4"}),"Nuevo Servicio"]})]}),o?(0,b.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Cargando..."}):0===m.length?(0,b.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No hay servicios. Crea uno nuevo."}):(0,b.jsx)("div",{className:"divide-y",children:m.map(a=>{var c;let d,g=(c=a.icon,(d=t.find(a=>a.value===c))?d.icon:r.Info);return(0,b.jsxs)("div",{className:"p-4 flex items-center gap-4 hover:bg-gray-50",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-lg bg-emerald-100 flex items-center justify-center text-emerald-600",children:(0,b.jsx)(g,{className:"w-6 h-6"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("h3",{className:"font-medium text-gray-900",children:a.title}),!a.is_active&&(0,b.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-500 text-xs rounded",children:"Inactivo"})]}),(0,b.jsx)("p",{className:"text-sm text-gray-500 truncate",children:a.description}),(0,b.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Enlace: ",a.link_url||"Sin enlace"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>{y(a),A({title:a.title,description:a.description||"",icon:a.icon||"info",link_url:a.link_url||"",display_order:a.display_order,is_active:a.is_active}),w(!0)},className:"p-2 text-gray-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg",children:(0,b.jsx)(e.Edit,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>S(a.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:(0,b.jsx)(f.Trash2,{className:"w-4 h-4"})})]})]},a.id)})})]}),"interest"===a&&(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-4 border-b flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"font-semibold text-gray-900",children:"Páginas de Interés"}),(0,b.jsxs)("button",{onClick:()=>{I(null),K({...v,display_order:B.length+1}),G(!0)},className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:[(0,b.jsx)(d.Plus,{className:"w-4 h-4"}),"Nueva Página"]})]}),D?(0,b.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Cargando..."}):0===B.length?(0,b.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No hay páginas de interés. Crea una nueva."}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4",children:B.map(a=>(0,b.jsxs)("div",{className:"relative group rounded-lg overflow-hidden shadow-md",children:[(0,b.jsxs)("div",{className:"aspect-video bg-gray-100 relative",children:[a.image_url?(0,b.jsx)("img",{src:a.image_url,alt:a.title,className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(i.Image,{className:"w-8 h-8 text-gray-300"})}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,b.jsx)("span",{className:"px-4 text-white font-semibold",children:a.title})}),!a.is_active&&(0,b.jsx)("div",{className:"absolute top-2 right-2 px-2 py-1 bg-gray-900/70 text-white text-xs rounded",children:"Inactivo"})]}),(0,b.jsxs)("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>{I(a),K({title:a.title,description:a.description||"",image_url:a.image_url||"",link_url:a.link_url||"",display_order:a.display_order,is_active:a.is_active}),G(!0)},className:"p-2 bg-white rounded-lg text-emerald-600 hover:bg-emerald-50",children:(0,b.jsx)(e.Edit,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>W(a.id),className:"p-2 bg-white rounded-lg text-red-600 hover:bg-red-50",children:(0,b.jsx)(f.Trash2,{className:"w-4 h-4"})})]})]},a.id))})]}),q&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-md flex items-center justify-center z-50 p-4",onClick:()=>w(!1),children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"p-4 border-b flex justify-between items-center sticky top-0 bg-white",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:x?"Editar Servicio":"Nuevo Servicio"}),(0,b.jsx)("button",{onClick:()=>w(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,b.jsx)(g.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("form",{onSubmit:R,className:"p-4 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título *"}),(0,b.jsx)("input",{type:"text",required:!0,value:z.title,onChange:a=>A({...z,title:a.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),(0,b.jsx)("textarea",{rows:3,value:z.description,onChange:a=>A({...z,description:a.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Icono"}),(0,b.jsx)("div",{className:"grid grid-cols-4 gap-2",children:t.map(a=>{let c=a.icon;return(0,b.jsxs)("button",{type:"button",onClick:()=>A({...z,icon:a.value}),className:`p-3 rounded-lg border-2 flex flex-col items-center gap-1 transition-all ${z.icon===a.value?"border-emerald-500 bg-emerald-50 text-emerald-700":"border-gray-200 hover:border-gray-300"}`,children:[(0,b.jsx)(c,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"text-xs",children:a.label})]},a.value)})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Enlace (URL)"}),(0,b.jsx)("input",{type:"text",value:z.link_url,onChange:a=>A({...z,link_url:a.target.value}),placeholder:"/horarios",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Orden"}),(0,b.jsx)("input",{type:"number",min:"1",value:z.display_order,onChange:a=>A({...z,display_order:parseInt(a.target.value)||1}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:z.is_active,onChange:a=>A({...z,is_active:a.target.checked}),className:"w-4 h-4 text-emerald-600 rounded"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:"Activo"})]})})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>w(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg",children:"Cancelar"}),(0,b.jsxs)("button",{type:"submit",disabled:L,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50",children:[(0,b.jsx)(h.Save,{className:"w-4 h-4"}),L?"Guardando...":"Guardar"]})]})]})]})}),F&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-md flex items-center justify-center z-50 p-4",onClick:()=>G(!1),children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"p-4 border-b flex justify-between items-center sticky top-0 bg-white",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:H?"Editar Página":"Nueva Página de Interés"}),(0,b.jsx)("button",{onClick:()=>G(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,b.jsx)(g.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("form",{onSubmit:V,className:"p-4 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título *"}),(0,b.jsx)("input",{type:"text",required:!0,value:J.title,onChange:a=>K({...J,title:a.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),(0,b.jsx)("textarea",{rows:2,value:J.description,onChange:a=>K({...J,description:a.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Imagen"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("input",{type:"text",value:J.image_url,onChange:a=>K({...J,image_url:a.target.value}),placeholder:"URL de la imagen (https://...)",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"o"}),(0,b.jsxs)("label",{className:"flex-1",children:[(0,b.jsx)("input",{ref:P,type:"file",accept:"image/*",onChange:U,className:"hidden",disabled:N}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg cursor-pointer transition-colors border border-gray-300",children:[(0,b.jsx)(s.Upload,{className:"w-4 h-4"}),N?"Subiendo...":"Subir desde el equipo"]})]})]})]}),J.image_url&&(0,b.jsx)("div",{className:"mt-2 rounded-lg overflow-hidden h-32 bg-gray-100",children:(0,b.jsx)("img",{src:J.image_url,alt:"Preview",className:"w-full h-full object-cover",onError:a=>{a.target.style.display="none"}})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Enlace (URL)"}),(0,b.jsx)("input",{type:"text",value:J.link_url,onChange:a=>K({...J,link_url:a.target.value}),placeholder:"/pagina o https://...",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Orden"}),(0,b.jsx)("input",{type:"number",min:"1",value:J.display_order,onChange:a=>K({...J,display_order:parseInt(a.target.value)||1}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:J.is_active,onChange:a=>K({...J,is_active:a.target.checked}),className:"w-4 h-4 text-emerald-600 rounded"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:"Activo"})]})})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>G(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg",children:"Cancelar"}),(0,b.jsxs)("button",{type:"submit",disabled:L,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50",children:[(0,b.jsx)(h.Save,{className:"w-4 h-4"}),L?"Guardando...":"Guardar"]})]})]})]})})]})}a.s(["default",()=>w],17303)}];

//# sourceMappingURL=src_app_admin_home-content_page_tsx_57c802d1._.js.map