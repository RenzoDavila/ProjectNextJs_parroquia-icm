{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/davilaacostarenzojhair/DESARROLLO/Nyutku%20Systems/parroquia-icm-nextjs/src/lib/db.ts"],"sourcesContent":["import { Pool } from 'pg';\n\n// Configuración del pool de conexiones\nconst pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n  ssl: process.env.NODE_ENV === 'production' ? { rejectUnauthorized: false } : false,\n  max: 20,\n  idleTimeoutMillis: 30000,\n  connectionTimeoutMillis: 2000,\n});\n\n// Función para ejecutar queries\nexport async function query(text: string, params?: any[]) {\n  const start = Date.now();\n  try {\n    const res = await pool.query(text, params);\n    const duration = Date.now() - start;\n    console.log('Ejecutada query', { text, duration, rows: res.rowCount });\n    return res;\n  } catch (error) {\n    console.error('Error en query de base de datos:', error);\n    throw error;\n  }\n}\n\n// Función para obtener un cliente del pool (para transacciones)\nexport async function getClient() {\n  return await pool.connect();\n}\n\n// Cerrar el pool (útil para testing)\nexport async function closePool() {\n  await pool.end();\n}\n\nexport default pool;\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;;;;;AAEA,uCAAuC;AACvC,MAAM,OAAO,IAAI,4GAAI,CAAC;IACpB,kBAAkB,QAAQ,GAAG,CAAC,YAAY;IAC1C,KAAK,sCAAwC,0BAAgC;IAC7E,KAAK;IACL,mBAAmB;IACnB,yBAAyB;AAC3B;AAGO,eAAe,MAAM,IAAY,EAAE,MAAc;IACtD,MAAM,QAAQ,KAAK,GAAG;IACtB,IAAI;QACF,MAAM,MAAM,MAAM,KAAK,KAAK,CAAC,MAAM;QACnC,MAAM,WAAW,KAAK,GAAG,KAAK;QAC9B,QAAQ,GAAG,CAAC,mBAAmB;YAAE;YAAM;YAAU,MAAM,IAAI,QAAQ;QAAC;QACpE,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,oCAAoC;QAClD,MAAM;IACR;AACF;AAGO,eAAe;IACpB,OAAO,MAAM,KAAK,OAAO;AAC3B;AAGO,eAAe;IACpB,MAAM,KAAK,GAAG;AAChB;uCAEe"}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///Users/davilaacostarenzojhair/DESARROLLO/Nyutku%20Systems/parroquia-icm-nextjs/src/app/api/admin/donation-info/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { query } from '@/lib/db';\n\nexport async function GET() {\n  try {\n    const result = await query('SELECT * FROM donation_info ORDER BY id ASC');\n    return NextResponse.json({ success: true, data: result.rows });\n  } catch (error) {\n    console.error('Error:', error);\n    return NextResponse.json({ success: false, error: 'Error al cargar datos' }, { status: 500 });\n  }\n}\n\nexport async function POST(request: Request) {\n  try {\n    const body = await request.json();\n    const result = await query(\n      `INSERT INTO donation_info (\n        title, subtitle, bank_name, account_type, \n        account_number, cci, account_holder, \n        purpose_title, purpose_description, \n        purpose_image_url, is_active\n      ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) \n      RETURNING *`,\n      [\n        body.title, body.subtitle, body.bank_name,\n        body.account_type, body.account_number, body.cci, body.account_holder,\n        body.purpose_title, body.purpose_description, body.purpose_image_url,\n        body.is_active\n      ]\n    );\n    return NextResponse.json({ success: true, data: result.rows[0] });\n  } catch (error) {\n    console.error('Error:', error);\n    return NextResponse.json({ success: false, error: 'Error al crear' }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;;;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,SAAS,MAAM,IAAA,2HAAK,EAAC;QAC3B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,MAAM,OAAO,IAAI;QAAC;IAC9D,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,UAAU;QACxB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7F;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,SAAS,MAAM,IAAA,2HAAK,EACxB,CAAC;;;;;;iBAMU,CAAC,EACZ;YACE,KAAK,KAAK;YAAE,KAAK,QAAQ;YAAE,KAAK,SAAS;YACzC,KAAK,YAAY;YAAE,KAAK,cAAc;YAAE,KAAK,GAAG;YAAE,KAAK,cAAc;YACrE,KAAK,aAAa;YAAE,KAAK,mBAAmB;YAAE,KAAK,iBAAiB;YACpE,KAAK,SAAS;SACf;QAEH,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,MAAM,OAAO,IAAI,CAAC,EAAE;QAAC;IACjE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,UAAU;QACxB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,OAAO;QAAiB,GAAG;YAAE,QAAQ;QAAI;IACtF;AACF"}}]
}